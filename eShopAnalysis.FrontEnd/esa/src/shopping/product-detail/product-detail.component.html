<div class="product-detail-container">
    <div class="product-detail-image-container">
        <img [src]="product?.productCoverImage" alt="product image">
    </div>
    <div class="product-detail-info-container">
        <div class="product-detail-info">
            <div class="product-detail-info-title">
                <h2>{{product?.productName}}</h2>
                <span>{{product?.subCatalogName}}</span>
                <div class="product-interaction" *ngIf="(this.authStatus$ | async) === AuthStatus.Authenticated">
                    <ng-container 
                        *ngIf="
                            (this.isProductLiked$ | async) !== undefined &&
                            (this.isProductLiked$ | async) === true; 
                            then likedTemplated 
                            else unlikedTemplate
                        "
                    >
                    </ng-container>
                    <ng-template #likedTemplated>
                        <button (click)="likeProduct()">
                            <i class="fas fa-thumbs-up"></i>
                        </button>
                    </ng-template>
                    <ng-template #unlikedTemplate>
                        <button (click)="likeProduct()">
                            <i class="far fa-thumbs-up"></i>
                        </button>
                    </ng-template>

                    <ng-container 
                        *ngIf="
                            (this.isProductDisliked$ | async) !== undefined &&
                            (this.isProductDisliked$ | async) === true; 
                            then dislikedTemplated 
                            else unDislikedTemplate
                        "
                    >
                    </ng-container>
                    <ng-template #dislikedTemplated>
                        <button (click)="dislikeProduct()">
                            <i class="fas fa-thumbs-down"></i>
                        </button>
                    </ng-template>
                    <ng-template #unDislikedTemplate>
                        <button (click)="dislikeProduct()">
                            <i class="far fa-thumbs-down"></i>
                        </button>
                    </ng-template>

                    <ng-container 
                        *ngIf="
                            (this.isProductBookmarked$ | async) !== undefined &&
                            (this.isProductBookmarked$ | async) === true; 
                            then bookmarkedTemplated 
                            else unBookmarkedTemplate
                        "
                    >
                    </ng-container>
                    <ng-template #bookmarkedTemplated>
                        <button (click)="bookmarkProduct()">
                            <i class="fas fa-heart"></i>
                        </button>
                    </ng-template>
                    <ng-template #unBookmarkedTemplate>
                        <button (click)="bookmarkProduct()">
                            <i class="far fa-heart"></i>
                        </button>
                    </ng-template>                    
                </div>

                <!-- thanks to: https://codepen.io/andreacrawford/pen/NvqJXW -->
                <div id="half-stars-example" *ngIf="(this.authStatus$ | async) === AuthStatus.Authenticated">
                    <div class="rating-group">
                        <input class="rating__input rating__input--none" 
                               checked 
                               name="rating2" 
                               id="rating2-0" 
                               value="0" 
                               type="radio">
                        <label aria-label="0 stars" 
                               class="rating__label" 
                               for="rating2-0">
                            &nbsp;                                   
                        </label>
                        <label aria-label="0.5 stars" 
                               class="rating__label rating__label--half" 
                               for="rating2-05">
                            <i class="rating__icon rating__icon--star fa fa-star-half"></i>
                        </label>
                        <input class="rating__input" 
                               name="rating2" 
                               id="rating2-05" 
                               value="0.5" 
                               type="radio">
                        <label aria-label="1 star" class="rating__label" for="rating2-10"><i class="rating__icon rating__icon--star fa fa-star"></i></label>
                        <input class="rating__input" name="rating2" id="rating2-10" value="1" type="radio">
                        <label aria-label="1.5 stars" class="rating__label rating__label--half" for="rating2-15"><i class="rating__icon rating__icon--star fa fa-star-half"></i></label>
                        <input class="rating__input" name="rating2" id="rating2-15" value="1.5" type="radio">
                        <label aria-label="2 stars" class="rating__label" for="rating2-20"><i class="rating__icon rating__icon--star fa fa-star"></i></label>
                        <input class="rating__input" name="rating2" id="rating2-20" value="2" type="radio">
                        <label aria-label="2.5 stars" class="rating__label rating__label--half" for="rating2-25"><i class="rating__icon rating__icon--star fa fa-star-half"></i></label>
                        <input class="rating__input" name="rating2" id="rating2-25" value="2.5" type="radio" checked>
                        <label aria-label="3 stars" class="rating__label" for="rating2-30"><i class="rating__icon rating__icon--star fa fa-star"></i></label>
                        <input class="rating__input" name="rating2" id="rating2-30" value="3" type="radio">
                        <label aria-label="3.5 stars" class="rating__label rating__label--half" for="rating2-35"><i class="rating__icon rating__icon--star fa fa-star-half"></i></label>
                        <input class="rating__input" name="rating2" id="rating2-35" value="3.5" type="radio">
                        <label aria-label="4 stars" class="rating__label" for="rating2-40"><i class="rating__icon rating__icon--star fa fa-star"></i></label>
                        <input class="rating__input" name="rating2" id="rating2-40" value="4" type="radio">
                        <label aria-label="4.5 stars" class="rating__label rating__label--half" for="rating2-45"><i class="rating__icon rating__icon--star fa fa-star-half"></i></label>
                        <input class="rating__input" name="rating2" id="rating2-45" value="4.5" type="radio">
                        <label aria-label="5 stars" class="rating__label" for="rating2-50"><i class="rating__icon rating__icon--star fa fa-star"></i></label>
                        <input class="rating__input" name="rating2" id="rating2-50" value="5" type="radio">
                    </div>
                  <p class="desc" style="margin-bottom: 2rem; font-family: sans-serif; font-size:0.9rem">Half stars<br/>
                    Space on left side to select 0 stars</p>
                </div>
            </div>
            <div class="product-detail-info-price">
                Giam gia <span style="color: red;">{{product?.productDisplayPriceOnSale | currency}}</span>
            </div>
            <div class="product-detail-info-description">
                <p>{{product?.isOnSale}}</p>
            </div>
            <ng-container *ngFor="let model of this.product?.productModels; let i = index">
                <div class="product-detail-info-quantity" style="padding: 2rem; border: 1px solid dodgerblue;">
                    <h2>Model {{i}}</h2>
                    <p>Price {{model.price}} <span style="color: red;">{{model.priceOnSaleModel}}</span></p>
                    <label>Quantity</label>
                    <input type="number" name="quantity" min="1" max="5" value="1" style="border: 1px solid lightgrey;">
                    <br>
                    <button mat-raised-button color="primary" (click)="addModelToCart($event, model)">Add to Cart</button>
                </div>
            </ng-container>
        </div>
    </div>
